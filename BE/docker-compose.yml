services:
  documind-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: documind-backend
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
      - Ollama__BaseUrl=http://host.docker.internal:11434
      - QdrantSettings__Host=host.docker.internal
      - QdrantSettings__Port=6334
    ports:
      - "8080:8080"
    volumes:
      # Mount the development settings so changes on host are reflected and secrets are available
      - ./src/DocuMind.API/appsettings.Development.json:/app/appsettings.Development.json:ro
    extra_hosts:
      - "host.docker.internal:host-gateway" # Allows access to host machine's localhost
